<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Joehwang.tw</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Joehwang.tw">
<meta property="og:url" content="http://blog.joehwang.net/index.html">
<meta property="og:site_name" content="Joehwang.tw">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Joehwang.tw">
  
    <link rel="alternate" href="/atom.xml" title="Joehwang.tw" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Joehwang.tw</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.joehwang.net"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/21/hello-world/" class="article-date">
  <time datetime="2018-01-20T16:38:37.000Z" itemprop="datePublished">2018-01-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/21/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2018/01/21/hello-world/" data-id="cjcnlvoe7002dcoky8xymime6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-use-gcp-container-registry-to-establish-docker-private-registry" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/19/use-gcp-container-registry-to-establish-docker-private-registry/" class="article-date">
  <time datetime="2018-01-19T01:15:00.000Z" itemprop="datePublished">2018-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/GCP/">GCP</a>►<a class="article-category-link" href="/categories/GCP/docker/">docker</a>►<a class="article-category-link" href="/categories/GCP/docker/GCP-Container-Registry/">GCP Container Registry</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/19/use-gcp-container-registry-to-establish-docker-private-registry/">使用GCP Container Registry建立docker private registry</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>同字面意思，GCP的container Registry提供docker私有庫的host服務，<br>價格為<code>Google Cloud Storage 儲存空間與網路輸出流量費用</code>。</p>
<h3 id="在專案中啟用Container-Registry-api"><a href="#在專案中啟用Container-Registry-api" class="headerlink" title="在專案中啟用Container Registry api"></a>在專案中啟用Container Registry api</h3><p>[<a href="https://console.cloud.google.com/apis/library" target="_blank" rel="noopener">https://console.cloud.google.com/apis/library</a>]</p>
<h3 id="安裝GCP-Command-Line-tool-並登入帳號"><a href="#安裝GCP-Command-Line-tool-並登入帳號" class="headerlink" title="安裝GCP Command Line tool 並登入帳號"></a>安裝GCP Command Line tool 並登入帳號</h3><p>參考: [<a href="https://cloud.google.com/sdk/docs/quickstarts?hl=zh-tw" target="_blank" rel="noopener">https://cloud.google.com/sdk/docs/quickstarts?hl=zh-tw</a>]</p>
<p>安裝完後用Command line tool登入GCP帳號</p>
<p><code>gcloud auth login</code></p>
<h3 id="修改要存放到GCR的docker映像檔tag"><a href="#修改要存放到GCR的docker映像檔tag" class="headerlink" title="修改要存放到GCR的docker映像檔tag"></a>修改要存放到GCR的docker映像檔tag</h3><p>參考:[<a href="https://cloud.google.com/container-registry/docs/pushing-and-pulling" target="_blank" rel="noopener">https://cloud.google.com/container-registry/docs/pushing-and-pulling</a>]</p>
<p>文件中tag的格式為<code>[HOSTNAME]/[PROJECT-ID]/[IMAGE][:TAG|@DIGEST]</code></p>
<p>PROJECT-ID可由<code>gcloud projects list</code>查詢</p>
<p>HOSTNAME是GCR的區域名稱有us.gcr.io / eu.gcr.io /  asia.gcr.io / gcr.io四個可選</p>
<p>這裡選擇asia.gcr.io，指令像這樣</p>
<p><code>docker tag 換tag的image名稱 asia.gcr.io/專案-ID/換tag的image名稱:lastest</code></p>
<h3 id="上傳映像檔"><a href="#上傳映像檔" class="headerlink" title="上傳映像檔"></a>上傳映像檔</h3><p><code>gcloud docker -- push asia.gcr.io/專案-ID/換tag的image名稱:lastest</code></p>
<h3 id="下載映像檔"><a href="#下載映像檔" class="headerlink" title="下載映像檔"></a>下載映像檔</h3><p><code>gcloud docker -- pull asia.gcr.io/專案-ID/換tag的image名稱:lastest</code></p>
<h3 id="使用docker-pull-、-docker-push-取得、上傳images"><a href="#使用docker-pull-、-docker-push-取得、上傳images" class="headerlink" title="使用docker pull 、 docker push 取得、上傳images"></a>使用docker pull 、 docker push 取得、上傳images</h3><p>上文的docker push 或是docker pull都是使用gcloud的指令</p>
<p>直接使用docker 進行pull 或 push 需要把GCP的token放到docker CLI</p>
<p>參考:[<a href="https://cloud.google.com/container-registry/docs/advanced-authentication" target="_blank" rel="noopener">https://cloud.google.com/container-registry/docs/advanced-authentication</a>]</p>
<h4 id="在專案中建立一個Service-Account"><a href="#在專案中建立一個Service-Account" class="headerlink" title="在專案中建立一個Service Account"></a>在專案中建立一個Service Account</h4><p>在<code>API和服務的選單</code>&gt; <code>選擇憑證</code>&gt; <code>建立憑證</code>&gt;<code>服務帳戶金鑰</code><br>金鑰類型選<code>JSON</code>，並下載檔案</p>
<h4 id="設定-GOOGLE-APPLICATION-CREDENTIALS"><a href="#設定-GOOGLE-APPLICATION-CREDENTIALS" class="headerlink" title="設定 GOOGLE_APPLICATION_CREDENTIALS"></a>設定 GOOGLE_APPLICATION_CREDENTIALS</h4><p>參考:[<a href="https://cloud.google.com/docs/authentication/getting-started" target="_blank" rel="noopener">https://cloud.google.com/docs/authentication/getting-started</a>]</p>
<p>Linux :<br><code>export GOOGLE_APPLICATION_CREDENTIALS=&quot;下載的Service Account JSON檔案.json&quot;</code><br>Windows:<br><code>$env:GOOGLE_APPLICATION_CREDENTIALS=&quot;下載的json檔.json&quot;</code></p>
<h4 id="產生-token"><a href="#產生-token" class="headerlink" title="產生 token"></a>產生 token</h4><p><code>gcloud auth application-default print-access-token</code></p>
<h4 id="在docker中使用token進行GCR認證"><a href="#在docker中使用token進行GCR認證" class="headerlink" title="在docker中使用token進行GCR認證"></a>在docker中使用token進行GCR認證</h4><p><code>docker login -u oauth2accesstoken -p &quot;上文產生的token&quot; https://asia.gcr.io</code></p>
<ul>
<li>注意HOSTNAME要與push / pull的host name相同</li>
</ul>
<p>如此便可使用docker 命令 直接 pull / push 映像檔了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2018/01/19/use-gcp-container-registry-to-establish-docker-private-registry/" data-id="cjcnlvodo001ucoky7jp3eehk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-rails51-and-webpacker" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/23/rails51-and-webpacker/" class="article-date">
  <time datetime="2017-05-23T00:14:00.000Z" itemprop="datePublished">2017-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/23/rails51-and-webpacker/">rails5.1與webpacker</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>近幾年前端技術大躍進發展出許多新工具</p>
<p>以往要把這些工具整合進rails會讓工作流程有點繁瑣</p>
<p>rails5.1增加了與webpack的整合，解決了這個痛點</p>
<h3 id="webpack介紹"><a href="#webpack介紹" class="headerlink" title="webpack介紹"></a>webpack介紹</h3><p>‘Webpack 是一個針對JavaScript的打包工具。但是自發布以來，演變成了一個針對所有前端代碼的管理工具（不管是其本身有意還是社區的意願）。</p>
<p>見 <a href="https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/" target="_blank" rel="noopener">https://llp0574.github.io/2016/11/29/getting-started-with-webpack2/</a></p>
<h2 id="在rails5引入webpack"><a href="#在rails5引入webpack" class="headerlink" title="在rails5引入webpack"></a>在rails5引入webpack</h2><p><a href="https://github.com/rails/webpacker" target="_blank" rel="noopener">https://github.com/rails/webpacker</a></p>
<p><code>rails new [your_project] --webpack</code></p>
<p><code>rails webpacker:install</code></p>
<h3 id="安裝要使用的js-框架-這裡使用vue"><a href="#安裝要使用的js-框架-這裡使用vue" class="headerlink" title="安裝要使用的js 框架(這裡使用vue)"></a>安裝要使用的js 框架(這裡使用vue)</h3><p><code>rails webpacker:install:vue</code></p>
<h3 id="修改application-html-erb的helper"><a href="#修改application-html-erb的helper" class="headerlink" title="修改application.html.erb的helper"></a>修改application.html.erb的helper</h3><p><code>改為&lt;%= javascript_pack_tag &#39;xxxxx&#39; %&gt;</code></p>
<h3 id="啟動webpack-dev-server"><a href="#啟動webpack-dev-server" class="headerlink" title="啟動webpack dev server"></a>啟動webpack dev server</h3><p>修改js後能livereload</p>
<p>若在遠端進行開發，到<code>config/webpack/development.server.yml</code>修改host選項</p>
<p>更詳細介紹:<a href="https://ruby-china.org/topics/32904" target="_blank" rel="noopener">https://ruby-china.org/topics/32904</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2017/05/23/rails51-and-webpacker/" data-id="cjcnlvodr001wcokyoxtxbcxb" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-aws-api-gateway-notes" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/05/19/aws-api-gateway-notes/" class="article-date">
  <time datetime="2017-05-19T01:54:00.000Z" itemprop="datePublished">2017-05-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/05/19/aws-api-gateway-notes/">AWS api gateway筆記</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="參閱"><a href="#參閱" class="headerlink" title="參閱"></a>參閱</h2><p><a href="http://docs.aws.amazon.com/apigateway/latest/developerguide/use-custom-authorizer.html" target="_blank" rel="noopener">http://docs.aws.amazon.com/apigateway/latest/developerguide/use-custom-authorizer.html</a></p>
<h2 id="重點1"><a href="#重點1" class="headerlink" title="重點1"></a>重點1</h2><p><img src="http://user-image.logdown.io/user/2344/blog/2335/post/1852707/LJ5iOLWlTCqCLZAx0gb5_1.png" alt="1.png"></p>
<p>identity token source最後的”Auth”，是發request要做認證的header名稱可自由更換</p>
<p><img src="http://user-image.logdown.io/user/2344/blog/2335/post/1852707/45273nYQn644lM1AlDbw_2.png" alt="2.png"></p>
<h2 id="重點2"><a href="#重點2" class="headerlink" title="重點2"></a>重點2</h2><p>apigateway頁面中，Update Custom Authorizer &gt; Execution role，這個角色要增加Trust Relationship的設定<br>IAM &gt; Roles &gt; Trust relationships &gt; Edit Trust Relationship</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"Version"</span>: <span class="string">"2012-10-17"</span>,</span><br><span class="line">  <span class="attr">"Statement"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"Sid"</span>: <span class="string">""</span>,</span><br><span class="line">      <span class="attr">"Effect"</span>: <span class="string">"Allow"</span>,</span><br><span class="line">      <span class="attr">"Principal"</span>: &#123;</span><br><span class="line">        <span class="attr">"Service"</span>: <span class="string">"apigateway.amazonaws.com"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">"Action"</span>: <span class="string">"sts:AssumeRole"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2017/05/19/aws-api-gateway-notes/" data-id="cjcnlvodn001tcokypec8idbc" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-1575726" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/14/1575726/" class="article-date">
  <time datetime="2017-03-14T02:23:00.000Z" itemprop="datePublished">2017-03-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/14/1575726/">在aws Lambda上運行含binary的nodejs modules</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>據amazon文件所述(<a href="http://docs.aws.amazon.com/zh_cn/lambda/latest/dg/current-supported-versions.html" target="_blank" rel="noopener">http://docs.aws.amazon.com/zh_cn/lambda/latest/dg/current-supported-versions.html</a>)</p>
<p>`<br>底层 AWS Lambda 执行环境建立在以下各项的基础之上：</p>
<p>公用 Amazon Linux AMI 版本（AMI 名称：amzn-ami-hvm-2016.03.3.x86_64-gp2）：<br>有关使用 AMI 的信息，请参阅Amazon EC2 用户指南（适用于 Linux 实例） 中的 Amazon 系统映像 (AMI)。<br>Linux 内核版本 - 4.4.35-33.55.amzn1.x86_64<br>如果您使用代码中的任何本机二进制文件，请确保在此环境编译这些文件。注意，在 AWS Lambda 上仅支持 64 位二进制文件。</p>
<p>AWS Lambda 支持以下运行时版本：</p>
<p>Node.js - v0.10.36，v4.3.2（建议）<br>`</p>
<p>最快的方法就是在ec2上開一台 Amazon Linux AMI的機器，在機器中進行打包</p>
<p>參考<a href="https://blogs.csc.com/2016/08/02/creating-your-own-lambda-function-using-node-js/" target="_blank" rel="noopener">https://blogs.csc.com/2016/08/02/creating-your-own-lambda-function-using-node-js/</a></p>
<p>設定環境</p>
<p><code>sudo yum groupinstall &#39;Development Tools&#39;</code></p>
<p><code>wget https://nodejs.org/dist/v4.3.2/node-v4.3.2-linux-x64.tar.gz</code></p>
<p>解開<code>node-v4.3.2-linux-x64.tar.gz</code></p>
<p>設定路徑<code>PATH=$PATH:~/node-v4.3.2-linux-x64/bin/</code></p>
<p>建立aws command tool的登入認證</p>
<p>mkdir ~/.aws &amp;&amp; cd ~/.aws</p>
<p>vim config</p>
<p><code>[default]
output = json
region = ap-northeast-1(你的region)</code></p>
<p>vim credentials</p>
<p><code>[default]
aws_access_key_id = xxxxxxxxxxxx
aws_secret_access_key = xxxxxxxxxxxxxx</code></p>
<p>複製你的lambda function到這台機器然後運行、測試</p>
<p>然後打包</p>
<p><code>zip -r xxx.zip index.js node_modules</code></p>
<p><code>aws lambda update-function-code --function-name xxxxxx --zip-file fileb://xxx.zip</code></p>
<p>完成!</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2017/03/14/1575726/" data-id="cjcnlvodl001scoky13zw7fyj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-redmines-message-to-jandi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/03/10/redmines-message-to-jandi/" class="article-date">
  <time datetime="2017-03-09T21:57:00.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Jandi/">Jandi</a>►<a class="article-category-link" href="/categories/Jandi/redmine/">redmine</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/10/redmines-message-to-jandi/">讓redmine的訊息發到JANDI</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近公司內部溝通工具由Slack改為JANDI</p>
<p>個人感覺比Slack穩定，而且議題支援中文</p>
<p>而且費用比較便宜XDDD</p>
<p>我fork github上的redmine_webhook專案</p>
<p>增加了JANDI的支援，讓redmine能發訊息到</p>
<p>JANDI，有需要的朋友試試吧</p>
<p><a href="https://github.com/joehwang/redmine_webhook_for_JANDI" target="_blank" rel="noopener">https://github.com/joehwang/redmine_webhook_for_JANDI</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2017/03/10/redmines-message-to-jandi/" data-id="cjcnlvod5001pcokylkb8yxdw" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-rails-with-https" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/29/rails-with-https/" class="article-date">
  <time datetime="2014-10-29T02:44:00.000Z" itemprop="datePublished">2014-10-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/rails/">rails</a>►<a class="article-category-link" href="/categories/rails/link-to/">link_to</a>►<a class="article-category-link" href="/categories/rails/link-to/ssl/">ssl</a>►<a class="article-category-link" href="/categories/rails/link-to/ssl/Https/">Https</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/10/29/rails-with-https/">rails使用https網址(link_to導向https protocol)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>rails使用route處理url要走http或https</p>
<p>1.在route設定路由並命名<br>(命名後rails會自動產生login_path / login_url兩個helper，可用在link_to)</p>
<pre><code>MyApplication::Application.routes.draw do
  match &apos;user/login&apos; =&gt; &quot;user#login&quot;, :as =&gt; :login, :constraints =&gt; { :protocol =&gt; &quot;https&quot; }
end
</code></pre><p>2.</p>
<p>在link_to中使用</p>
<pre><code>&lt;%= link_to &quot;登入&quot;, login_url(:protocol =&gt; &apos;https&apos;) %&gt;
</code></pre><blockquote>
<p>記得要用xxx__url絕對路徑，</p>
<p>不要用xxx__path 相對路徑</p>
</blockquote>
<p>否則網址永遠不會導到https</p>
<p>可參考 <a href="http://stackoverflow.com/questions/3634100/rails-3-ssl-deprecation" target="_blank" rel="noopener">http://stackoverflow.com/questions/3634100/rails-3-ssl-deprecation</a></p>
<p><strong>同場加映</strong></p>
<p>Nginx的http和https(ssl)共存</p>
<p><a href="http://www.linuxyan.com/web-server/407.html" target="_blank" rel="noopener">http://www.linuxyan.com/web-server/407.html</a></p>
<p>自已簽發免費ssl証書，並綁在server</p>
<p><a href="http://blog.csdn.net/babydavic/article/details/8442817" target="_blank" rel="noopener">http://blog.csdn.net/babydavic/article/details/8442817</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2014/10/29/rails-with-https/" data-id="cjcnlvod6001qcoky3siujq1b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-rails32-ruby-2-issues-a-http-get-request-data-is-garbled" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/06/rails32-ruby-2-issues-a-http-get-request-data-is-garbled/" class="article-date">
  <time datetime="2013-12-06T01:24:00.000Z" itemprop="datePublished">2013-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/06/rails32-ruby-2-issues-a-http-get-request-data-is-garbled/">rails3.2 + ruby 2.0 發出http get request 資料亂碼</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>把server升上ruby 2.0後在rails3.2中發出get抓facebook api資料<strong>有時</strong>會是Ascii-8，印在頁面無法識別，用encoding類別強轉utf8也沒有用，測了一下發現換回 ruby 1.9.3不會有這樣的問題</p>
<p>解法:</p>
<p>1.改用Ruby 1.9.3 + rails 3.2</p>
<p>2.Ruby 2.0 + rails 3.2 + 發http的程式改用httparty</p>
<p>3.Ruby 2.0 + rails 4</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2013/12/06/rails32-ruby-2-issues-a-http-get-request-data-is-garbled/" data-id="cjcnlvod4001ncoky3gw19cd6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-rails-to-prevent-page-caching" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/12/06/rails-to-prevent-page-caching/" class="article-date">
  <time datetime="2013-12-06T01:23:00.000Z" itemprop="datePublished">2013-12-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/12/06/rails-to-prevent-page-caching/">Rails阻止頁面快取</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>遇到一個問題，User登入後按瀏覽器的回上頁，右上角的登入區塊</p>
<p>不會更新，觀察log發現，瀏覽器回上面時沒有向server發出request</p>
<p>解決方法:</p>
<p>停用頁面快取</p>
<p><code>response.headers[&quot;Cache-Control&quot;] = &quot;no-cache, no-store, max-age=0, must-revalidate&quot;
      response.headers[&quot;Pragma&quot;] = &quot;no-cache&quot;
      response.headers[&quot;Expires&quot;] = &quot;Fri, 01 Jan 1990 00:00:00 GMT&quot;</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2013/12/06/rails-to-prevent-page-caching/" data-id="cjcnlvod5001ocokyoljuy4v7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-change-the-bootstrap-button-color" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/16/change-the-bootstrap-button-color/" class="article-date">
  <time datetime="2013-08-15T19:21:00.000Z" itemprop="datePublished">2013-08-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2013/08/16/change-the-bootstrap-button-color/">Rails更改bootstrap按鈕顏色</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>更改bootstrap按鈕顏色這事，我一直找不到好用又有效率的方法</p>
<p>以下整理兩種作法</p>
<h2 id="一、override-bootstrap-scss裡的變數"><a href="#一、override-bootstrap-scss裡的變數" class="headerlink" title="一、override bootstrap scss裡的變數"></a>一、override bootstrap scss裡的變數</h2><p>查詢bootstrap裡的scss變數然後蓋過去<br>[[<a href="http://decioferreira.github.io/bootstrap-generators/" target="_blank" rel="noopener">http://decioferreira.github.io/bootstrap-generators/</a>]]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/*粉紅色按鈕*/</span><br><span class="line">$btnSuccessBackground: darken(#DD5295,5%);</span><br><span class="line">$btnSuccessBackgroundHighlight: lighten($btnSuccessBackground, 5%);</span><br><span class="line">/*藍色按鈕*/</span><br><span class="line">$btnPrimaryBackground: #4a96d0;</span><br><span class="line">$btnPrimaryBackgroundHighlight: lighten(#4a96d0, 1%);</span><br><span class="line">/*登入按鈕*/</span><br><span class="line">$btnInfoBackground: darken(#1BCDCD, 5%);</span><br><span class="line">$btnInfoBackgroundHighlight: #1BCDCD;</span><br><span class="line">/*facebook登入按鈕*/</span><br><span class="line">$btnDangerBackground: darken(#4D6CA2,5%);</span><br><span class="line">$btnDangerBackgroundHighlight: lighten(#4D6CA2,0%);</span><br><span class="line">@import &quot;bootstrap&quot;;</span><br></pre></td></tr></table></figure>
<h2 id="二、css直接覆寫"><a href="#二、css直接覆寫" class="headerlink" title="二、css直接覆寫"></a>二、css直接覆寫</h2><p>基本上就是蓋掉button上的css</p>
<p>[[<a href="http://charliepark.org/bootstrap_buttons/" target="_blank" rel="noopener">http://charliepark.org/bootstrap_buttons/</a>]]<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">.btn-custom &#123;</span><br><span class="line">  background-color: hsl(201, 100%, 30%) !important;</span><br><span class="line">  background-repeat: repeat-x;</span><br><span class="line">  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=&quot;#00a5ff&quot;, endColorstr=&quot;#006399&quot;);</span><br><span class="line">  background-image: -khtml-gradient(linear, left top, left bottom, from(#00a5ff), to(#006399));</span><br><span class="line">  background-image: -moz-linear-gradient(top, #00a5ff, #006399);</span><br><span class="line">  background-image: -ms-linear-gradient(top, #00a5ff, #006399);</span><br><span class="line">  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #00a5ff), color-stop(100%, #006399));</span><br><span class="line">  background-image: -webkit-linear-gradient(top, #00a5ff, #006399);</span><br><span class="line">  background-image: -o-linear-gradient(top, #00a5ff, #006399);</span><br><span class="line">  background-image: linear-gradient(#00a5ff, #006399);</span><br><span class="line">  border-color: #006399 #006399 hsl(201, 100%, 25%);</span><br><span class="line">  color: #fff !important;</span><br><span class="line">  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.33);</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.joehwang.net/2013/08/16/change-the-bootstrap-button-color/" data-id="cjcnlvod4001mcokybgcsjpks" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/GCP/">GCP</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/GCP/docker/">docker</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/GCP/docker/GCP-Container-Registry/">GCP Container Registry</a></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jandi/">Jandi</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Jandi/redmine/">redmine</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/rails/">rails</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/rails/link-to/">link_to</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/rails/link-to/ssl/">ssl</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/rails/link-to/ssl/Https/">Https</a></li></ul></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/01/">January 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06/">June 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/01/">January 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12/">December 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/11/">November 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/10/">October 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/09/">September 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/08/">August 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/07/">July 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/06/">June 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/05/">May 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/04/">April 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/02/">February 2007</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/12/">December 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/10/">October 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/08/">August 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/07/">July 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/05/">May 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/04/">April 2006</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/03/">March 2006</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/21/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2018/01/19/use-gcp-container-registry-to-establish-docker-private-registry/">使用GCP Container Registry建立docker private registry</a>
          </li>
        
          <li>
            <a href="/2017/05/23/rails51-and-webpacker/">rails5.1與webpacker</a>
          </li>
        
          <li>
            <a href="/2017/05/19/aws-api-gateway-notes/">AWS api gateway筆記</a>
          </li>
        
          <li>
            <a href="/2017/03/14/1575726/">在aws Lambda上運行含binary的nodejs modules</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Joehwang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>